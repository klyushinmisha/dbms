# DBMS

## Проект "База-данных" в рамках ВКР

### Краткое описание


Данный проект представляет собой базу-данных типа ключ-значение


### Функционал


- Хранение данных в рамках модели "Ключ-значение"
- Модель хранения ориентирована на высокую частоту чтения
- Оптимальная скорость записи
- Различные способы взаимодействия клиента с системой (TCP-socket, Unix-socket, CLI)


### Дизайн

1) База данных осуществляет поблочное хранение данных в журнале


2) Для ускорения доступа используется B+ tree индекс над множеством ключей


3) Данные хранятся блочно. Структура блока:

   - позиция следующего сегмента
   - данные сегмента

   Блок может быть помечен занятым и свободным (реализуется через bitset, хранящийся отдельно)


4) Значение, связанное с ключом, при необходимости разделяется на некоторое число сегментов фиксированной
длины, объединенных в связный список
   

5) Алгоритм записи значения в журнал
   
   1) Считывание сегмента данных из входной последовательности
   2) Последовательный поиск свободного блока
   3) Запись сегмента в блок
   4) Отметка занятого блока в bitset
   5) Внесение ключа в B+ tree индекс для ускорения доступа
   
   Алгоритм повторяется требуемое число раз. В п.2 поиск не прерывается после найденного сегмента с целью
последовательного поиска для всех сегментов и лучшего быстродействия.


6) Алгоритм чтения значения из журнала

   1) Поиск позициии первого сегмента в B+ tree индексе
   2) Итерация по сегментам значения до последнего из них


7) Для оптимальной работы с ОЗУ используется механизм каналов Golang, позволяющий выдавать последовательные
сегменты данных. Данная оптимизация призвана обеспечить передачу больших значений отдельными сегментами,
избегая при этом аллокаций больших объемов памяти


8) Для организации устойчивости к падениям используется механизм Write-Ahead Log (WAL), позволяющий
организовать опережающее логирование операций


TODO:
   9) CLI ?
   10) Сетевое взаимодействие ?
   11) Транзакции ?
